# ╭─────────────────────────────────────────────────────────╮
# │                    Yazi 主配置文件                      │
# │              Yazi Main Configuration                    │
# ╰─────────────────────────────────────────────────────────╯

# ═══════════════════════════════════════════════════════════
#  插件配置 Plugin Configuration
# ═══════════════════════════════════════════════════════════

[plugin]
# 压缩文件预览器 - 使用 ouch 插件预览各种压缩格式
# Archive previewer - Use ouch plugin to preview various archive formats
prepend_previewers = [
	{ mime = "application/*zip",            run = "ouch" },  # ZIP 格式
	{ mime = "application/x-tar",           run = "ouch" },  # TAR 格式
	{ mime = "application/x-bzip2",         run = "ouch" },  # BZIP2 格式
	{ mime = "application/x-7z-compressed", run = "ouch" },  # 7Z 格式
	{ mime = "application/x-rar",           run = "ouch" },  # RAR 格式
	{ mime = "application/vnd.rar",         run = "ouch" },  # RAR 格式 (备用)
	{ mime = "application/x-xz",            run = "ouch" },  # XZ 格式
	{ mime = "application/xz",              run = "ouch" },  # XZ 格式 (备用)
	{ mime = "application/x-zstd",          run = "ouch" },  # ZSTD 格式
	{ mime = "application/zstd",            run = "ouch" },  # ZSTD 格式 (备用)
	{ mime = "application/java-archive",    run = "ouch" },  # JAR 格式
]

# ═══════════════════════════════════════════════════════════
#  文件打开器配置 Opener Configuration
# ═══════════════════════════════════════════════════════════

[opener]
# 文本编辑器 - 使用 Neovim 编辑文本文件
# Text editor - Use Neovim to edit text files
edit = [
	{ run = 'nvim "$@"', block = true, desc = "Edit with Neovim", for = "unix" },
]

# 解压操作 - 使用 ouch 解压文件
# Extract operation - Use ouch to decompress files
extract = [
	{ run = 'ouch d -y %*',   desc = "Extract here with ouch", for = "windows" },  # Windows 平台
	{ run = 'ouch d -y "$@"', desc = "Extract here with ouch", for = "unix" },     # Unix/Linux/macOS 平台
]

# ═══════════════════════════════════════════════════════════
#  默认打开方式 Default Open Behavior
# ═══════════════════════════════════════════════════════════

# 为文本文件设置默认编辑器
# Set default editor for text files
[open]
rules = [
	{ mime = "text/*", use = "edit" },
	{ mime = "application/json", use = "edit" },
	{ mime = "application/x-yaml", use = "edit" },
	{ mime = "application/toml", use = "edit" },
	{ mime = "application/xml", use = "edit" },
	{ mime = "inode/x-empty", use = "edit" },
]
