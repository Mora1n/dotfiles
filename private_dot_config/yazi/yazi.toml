# ╭─────────────────────────────────────────────────────────╮
# │                    Yazi 主配置文件                      │
# │              Yazi Main Configuration                    │
# ╰─────────────────────────────────────────────────────────╯

# ═══════════════════════════════════════════════════════════
#  插件配置 Plugin Configuration
# ═══════════════════════════════════════════════════════════

[plugin]
# 压缩文件预览器 - 使用 ouch 插件预览各种压缩格式
# Archive previewer - Use ouch plugin to preview various archive formats
prepend_previewers = [
	{ mime = "application/*zip",            run = "ouch" },
	{ mime = "application/x-tar",           run = "ouch" },
	{ mime = "application/x-bzip2",         run = "ouch" },
	{ mime = "application/x-7z-compressed", run = "ouch" },
	{ mime = "application/x-rar",           run = "ouch" },
	{ mime = "application/vnd.rar",         run = "ouch" },
	{ mime = "application/x-xz",            run = "ouch" },
	{ mime = "application/xz",              run = "ouch" },
	{ mime = "application/x-zstd",          run = "ouch" },
	{ mime = "application/zstd",            run = "ouch" },
	{ mime = "application/java-archive",    run = "ouch" },
]

# ═══════════════════════════════════════════════════════════
#  文件打开器配置 Opener Configuration
# ═══════════════════════════════════════════════════════════

[opener]
# 文本编辑器 - 使用 Neovim 编辑文本文件
# Text editor - Use Neovim to edit text files
edit = [
	{ run = 'nvim "$@"', block = true, desc = "Edit with Neovim", for = "unix" },
]

# 解压操作 - 使用 ouch 解压文件
# Extract operation - Use ouch to decompress files
extract = [
	{ run = 'ouch d -y %*',   desc = "Extract here with ouch", for = "windows" },  # Windows 平台
	{ run = 'ouch d -y "$@"', desc = "Extract here with ouch", for = "unix" },     # Unix/Linux/macOS 平台
]

# ═══════════════════════════════════════════════════════════
#  默认打开方式 Default Open Behavior
# ═══════════════════════════════════════════════════════════

# 为文本文件设置默认编辑器
# Set default editor for text files
[open]
rules = [
	# 文本文件 - 使用编辑器打开
	# Text files - Open with editor
	{ mime = "text/*", use = "edit" },
	{ mime = "application/json", use = "edit" },
	{ mime = "application/x-yaml", use = "edit" },
	{ mime = "text/yaml", use = "edit" },
	{ mime = "text/x-yaml", use = "edit" },
	{ mime = "application/toml", use = "edit" },
	{ mime = "application/xml", use = "edit" },
	{ mime = "inode/x-empty", use = "edit" },

	# 按文件名匹配 YAML 文件
	# Match YAML files by filename
	{ name = "*.yml", use = "edit" },
	{ name = "*.yaml", use = "edit" },

	# 压缩文件 - 使用解压工具 (按 MIME 类型)
	# Archive files - Use extract tool (by MIME type)
	{ mime = "application/*zip", use = "extract" },
	{ mime = "application/x-tar", use = "extract" },
	{ mime = "application/x-bzip2", use = "extract" },
	{ mime = "application/x-7z-compressed", use = "extract" },
	{ mime = "application/x-rar", use = "extract" },
	{ mime = "application/vnd.rar", use = "extract" },
	{ mime = "application/x-xz", use = "extract" },
	{ mime = "application/xz", use = "extract" },
	{ mime = "application/x-zstd", use = "extract" },
	{ mime = "application/zstd", use = "extract" },
	{ mime = "application/java-archive", use = "extract" },

	# 按文件名匹配压缩文件
	# Match archive files by filename
	{ name = "*.zip", use = "extract" },
	{ name = "*.tar", use = "extract" },
	{ name = "*.tar.gz", use = "extract" },
	{ name = "*.tgz", use = "extract" },
	{ name = "*.tar.bz2", use = "extract" },
	{ name = "*.tbz2", use = "extract" },
	{ name = "*.tar.xz", use = "extract" },
	{ name = "*.txz", use = "extract" },
	{ name = "*.tar.zst", use = "extract" },
	{ name = "*.7z", use = "extract" },
	{ name = "*.rar", use = "extract" },
	{ name = "*.jar", use = "extract" },
]
