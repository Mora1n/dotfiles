# ╭─────────────────────────────────────────────────────────╮
# │                    Yazi 键位映射配置                    │
# ╰─────────────────────────────────────────────────────────╯

# ═══════════════════════════════════════════════════════════
#  导航增强
# ═══════════════════════════════════════════════════════════

# 在父目录中向上移动
[[mgr.prepend_keymap]]
on  = "K"
run = "plugin parent-arrow -1"

# 在父目录中向下移动
[[mgr.prepend_keymap]]
on  = "J"
run = "plugin parent-arrow 1"

# 智能进入：进入目录或打开文件
[[mgr.prepend_keymap]]
on   = "l"
run  = "plugin smart-enter"
desc = "Enter the child directory, or open the file"

# ═══════════════════════════════════════════════════════════
#  文件操作
# ═══════════════════════════════════════════════════════════

# 修改文件权限
[[mgr.prepend_keymap]]
on   = [ "c", "m" ]
run  = "plugin chmod"
desc = "Chmod on selected files"

# 压缩文件
[[mgr.prepend_keymap]]
on   = "C"
run  = "plugin ouch"
desc = "Compress with ouch"

# 智能粘贴：粘贴到悬停目录或当前工作目录
[[mgr.prepend_keymap]]
on   = "p"
run  = "plugin smart-paste"
desc = "Paste into the hovered directory or CWD"

# 智能过滤：快速过滤文件列表
[[mgr.prepend_keymap]]
on   = "F"
run  = "plugin smart-filter"
desc = "Smart filter"

# 使用系统默认程序打开文件
[[mgr.prepend_keymap]]
on   = "O"
run  = "open --interactive"
desc = "Open with..."

# 使用系统默认程序直接打开（不显示菜单）
[[mgr.prepend_keymap]]
on   = [ "g", "o" ]
for  = "unix"
run  = 'shell xdg-open "$@" --confirm'
desc = "Open with default app"

[[mgr.prepend_keymap]]
on   = [ "g", "o" ]
for  = "macos"
run  = 'shell open "$@" --confirm'
desc = "Open with default app"

[[mgr.prepend_keymap]]
on   = [ "g", "o" ]
for  = "windows"
run  = 'shell start "" %* --confirm'
desc = "Open with default app"

# ═══════════════════════════════════════════════════════════
#  Shell 集成
# ═══════════════════════════════════════════════════════════

# 在当前位置打开 Shell
[[mgr.prepend_keymap]]
on   = "!"
for  = "unix"
run  = 'shell "$SHELL" --block'
desc = "Open $SHELL here"

[[mgr.prepend_keymap]]
on   = "!"
for  = "windows"
run  = 'shell "powershell.exe" --block'
desc = "Open PowerShell here"

# ═══════════════════════════════════════════════════════════
#  输入控制
# ═══════════════════════════════════════════════════════════

# 取消输入
[[input.prepend_keymap]]
on   = "<Esc>"
run  = "close"
desc = "Cancel input"

# ═══════════════════════════════════════════════════════════
#  退出控制
# ═══════════════════════════════════════════════════════════

# 确认退出
[[mgr.prepend_keymap]]
on   = "q"
run  = "plugin confirm-quit"
desc = "Quit with confirmation"

# ═══════════════════════════════════════════════════════════
#  标签页管理
# ═══════════════════════════════════════════════════════════

# 创建新标签页
[[mgr.prepend_keymap]]
on   = "t"
run  = "plugin smart-tab"
desc = "Create a tab and enter the hovered directory"

# 关闭当前标签页
[[mgr.prepend_keymap]]
on   = "T"
run  = "tab_close 0"
desc = "Close current tab"

# 切换到下一个标签页
[[mgr.prepend_keymap]]
on   = "]"
run  = "tab_switch 1 --relative"
desc = "Switch to next tab"

# 切换到上一个标签页
[[mgr.prepend_keymap]]
on   = "["
run  = "tab_switch -1 --relative"
desc = "Switch to previous tab"

# 向右交换标签页位置
[[mgr.prepend_keymap]]
on   = "}"
run  = "tab_swap 1"
desc = "Swap tab to the right"

# 向左交换标签页位置
[[mgr.prepend_keymap]]
on   = "{"
run  = "tab_swap -1"
desc = "Swap tab to the left"

# 快速跳转到标签页 1-9
[[mgr.prepend_keymap]]
on   = "1"
run  = "tab_switch 0"
desc = "Switch to tab 1"

# 智能切换到第 2 个标签页（不存在则创建）
[[mgr.prepend_keymap]]
on   = "2"
run  = "plugin smart-switch 1"
desc = "Switch or create tab 2"

[[mgr.prepend_keymap]]
on   = "3"
run  = "tab_switch 2"
desc = "Switch to tab 3"

[[mgr.prepend_keymap]]
on   = "4"
run  = "tab_switch 3"
desc = "Switch to tab 4"

[[mgr.prepend_keymap]]
on   = "5"
run  = "tab_switch 4"
desc = "Switch to tab 5"

[[mgr.prepend_keymap]]
on   = "6"
run  = "tab_switch 5"
desc = "Switch to tab 6"

[[mgr.prepend_keymap]]
on   = "7"
run  = "tab_switch 6"
desc = "Switch to tab 7"

[[mgr.prepend_keymap]]
on   = "8"
run  = "tab_switch 7"
desc = "Switch to tab 8"

[[mgr.prepend_keymap]]
on   = "9"
run  = "tab_switch 8"
desc = "Switch to tab 9"
