# ╭─────────────────────────────────────────────────────────╮
# │                    Yazi 键位映射配置                    │
# ╰─────────────────────────────────────────────────────────╯

# ═══════════════════════════════════════════════════════════
#  导航增强
# ═══════════════════════════════════════════════════════════

# 在父目录中向上移动
[[mgr.prepend_keymap]]
on   = "K"
run  = "plugin parent-arrow -1"
desc = "Parent directory up"

# 在父目录中向下移动
[[mgr.prepend_keymap]]
on   = "J"
run  = "plugin parent-arrow 1"
desc = "Parent directory down"

# 智能进入：进入目录或打开文件
[[mgr.prepend_keymap]]
on   = "l"
run  = "plugin smart-enter"
desc = "Enter the child directory, or open the file"

# ═══════════════════════════════════════════════════════════
#  文件操作
# ═══════════════════════════════════════════════════════════

# 修改文件权限
[[mgr.prepend_keymap]]
on   = [ "c", "m" ]
run  = "plugin chmod"
desc = "Chmod on selected files"

# 压缩文件
[[mgr.prepend_keymap]]
on   = "C"
run  = "plugin ouch"
desc = "Compress with ouch"

# 智能粘贴：粘贴到悬停目录或当前工作目录
[[mgr.prepend_keymap]]
on   = "p"
run  = "plugin smart-paste"
desc = "Paste into the hovered directory or CWD"

# 智能过滤：快速过滤文件列表
[[mgr.prepend_keymap]]
on   = "F"
run  = "plugin smart-filter"
desc = "Smart filter"

# 使用系统默认程序打开文件
[[mgr.prepend_keymap]]
on   = "O"
run  = "open --interactive"
desc = "Open with..."

# 使用系统默认程序直接打开（不显示菜单）
[[mgr.prepend_keymap]]
on   = [ "g", "o" ]
for  = "unix"
run  = 'shell xdg-open "$@" --confirm'
desc = "Open with default app"

[[mgr.prepend_keymap]]
on   = [ "g", "o" ]
for  = "macos"
run  = 'shell open "$@" --confirm'
desc = "Open with default app"

[[mgr.prepend_keymap]]
on   = [ "g", "o" ]
for  = "windows"
run  = 'shell start "" %* --confirm'
desc = "Open with default app"

# ═══════════════════════════════════════════════════════════
#  Shell 集成
# ═══════════════════════════════════════════════════════════

# 在当前位置打开 Shell
[[mgr.prepend_keymap]]
on   = "!"
for  = "unix"
run  = 'shell "$SHELL" --block'
desc = "Open $SHELL here"

[[mgr.prepend_keymap]]
on   = "!"
for  = "windows"
run  = 'shell "powershell.exe" --block'
desc = "Open PowerShell here"

# ═══════════════════════════════════════════════════════════
#  输入控制
# ═══════════════════════════════════════════════════════════

# 取消输入
[[input.prepend_keymap]]
on   = "<Esc>"
run  = "close"
desc = "Cancel input"

# ═══════════════════════════════════════════════════════════
#  退出控制
# ═══════════════════════════════════════════════════════════

# 确认退出
[[mgr.prepend_keymap]]
on   = "q"
run  = "plugin confirm-quit"
desc = "Quit with confirmation"

# 关闭当前标签页
[[mgr.prepend_keymap]]
on   = "T"
run  = "close"
desc = "Close current tab"

# ═══════════════════════════════════════════════════════════
#  Vim 风格相对移动 (relative-motions 插件)
# ═══════════════════════════════════════════════════════════
# 说明：按数字键启动 vim 风格的相对移动
# 用法示例：
#   3j  - 向下移动3行
#   5k  - 向上移动5行
#   2t  - 创建2个标签页
#   gg  - 跳转到指定行
#   3yy - 复制3个文件
# 完整命令列表见 relative-motions 插件文档

[[mgr.prepend_keymap]]
on = [ "1" ]
run = "plugin relative-motions 1"
desc = "Move in relative steps"

[[mgr.prepend_keymap]]
on   = [ "2" ]
run  = "plugin relative-motions 2"
desc = "Move in relative steps"

[[mgr.prepend_keymap]]
on   = [ "3" ]
run  = "plugin relative-motions 3"
desc = "Move in relative steps"

[[mgr.prepend_keymap]]
on   = [ "4" ]
run  = "plugin relative-motions 4"
desc = "Move in relative steps"

[[mgr.prepend_keymap]]
on   = [ "5" ]
run  = "plugin relative-motions 5"
desc = "Move in relative steps"

[[mgr.prepend_keymap]]
on   = [ "6" ]
run  = "plugin relative-motions 6"
desc = "Move in relative steps"

[[mgr.prepend_keymap]]
on   = [ "7" ]
run  = "plugin relative-motions 7"
desc = "Move in relative steps"

[[mgr.prepend_keymap]]
on   = [ "8" ]
run  = "plugin relative-motions 8"
desc = "Move in relative steps"

[[mgr.prepend_keymap]]
on   = [ "9" ]
run  = "plugin relative-motions 9"
desc = "Move in relative steps"

# ═══════════════════════════════════════════════════════════
#  设备挂载
# ═══════════════════════════════════════════════════════════

# 挂载/卸载设备
[[mgr.prepend_keymap]]
on   = "M"
run  = "plugin mount"
desc = "Mount/unmount devices"
